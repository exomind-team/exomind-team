# æŠ€æœ¯é€‰å‹ï¼šæ¶æ„å®šä½ + é›†æˆåˆ†æ

ğŸ“…åˆ›å»ºï¼š2026-01-20
ğŸ“æ•´åˆè‡ªï¼šæ¶æ„è®¾è®¡-20260120.mdã€ç§˜å¡”æœç´¢æŠ€æœ¯æ ˆåˆ†æã€æŠ€æœ¯é€‰å‹v1.md

---

## ä¸ƒå±‚æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬7å±‚ â”‚ UIå±‚           â”‚ core/ui/           â”‚ é€šç”¨UIç»„ä»¶ï¼ˆè·¨ç«¯å…±äº«ï¼‰         â”‚
â”‚       â”‚                â”‚ apps/*/ui/         â”‚ å„ç«¯ä¸“ç”¨UIå®ç°                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¬¬6å±‚ â”‚ ä¸šåŠ¡å±‚          â”‚ core/business/     â”‚ é€šç”¨ä¸šåŠ¡é€»è¾‘                   â”‚
â”‚       â”‚                â”‚ apps/*/business/   â”‚ å¹³å°é€‚é…ä¸šåŠ¡                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¬¬5å±‚ â”‚ äº‹ä»¶æ€»çº¿        â”‚ core/event-bus/    â”‚ Actorå†…æ¨¡å—é€šè®¯                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¬¬4å±‚ â”‚ æ•°æ®å±‚          â”‚ core/data/         â”‚ åŒºå—é“¾æ•°æ®ç»“æ„                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¬¬3å±‚ â”‚ åŒæ­¥å¼•æ“        â”‚ core/sync/         â”‚ åŒæ­¥ç­–ç•¥+å†²çªè§£å†³              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¬¬2å±‚ â”‚ å­˜å‚¨å±‚          â”‚ core/storage/      â”‚ SQLite/IndexedDBæœ¬åœ°å­˜å‚¨       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¬¬1å±‚ â”‚ ç½‘ç»œå±‚          â”‚ core/network/      â”‚ mDNS+P2P+WebSocket             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸€ã€UIå±‚ï¼ˆç¬¬7å±‚ï¼‰

### React

**æ¶æ„å®šä½**ï¼šUIå±‚ - å£°æ˜å¼æ¸²æŸ“ã€ç»„ä»¶åŒ–æ¡†æ¶

**é›†æˆåˆ†æ**ï¼š

| ç›¸å…³æŠ€æœ¯ | é›†æˆæ–¹å¼ | æ³¨æ„äº‹é¡¹ |
|----------|----------|----------|
| TypeScript | åŸç”Ÿæ”¯æŒ | ç¡®ä¿ `tsconfig.json` å¼€å¯ä¸¥æ ¼æ¨¡å¼ |
| Vite | æ„å»ºå·¥å…· | å¼€å‘æœåŠ¡å™¨ + ç”Ÿäº§æ‰“åŒ… |
| Tailwind CSS | æ ·å¼æ–¹æ¡ˆ | é…åˆ `@tailwindcss/vite` æˆ– PostCSS |
| Radix UI | æ— æ ·å¼ç»„ä»¶ | æä¾›å¯è®¿é—®æ€§è¡Œä¸ºé€»è¾‘ |
| Zustand | çŠ¶æ€ç®¡ç† | é€šè¿‡ Hooks è®¢é˜…çŠ¶æ€ |
| React Router | è·¯ç”±ç®¡ç† | é¡µé¢ç»„ä»¶ç»„åˆ |
| Tauri | åŸç”Ÿå°è£… | WebView æ¸²æŸ“ |
| shadcn/ui | ç»„ä»¶é›†åˆ | ç»„ä»¶ä»£ç å¤åˆ¶åˆ°é¡¹ç›® |

**å‘**ï¼š

- å¤§é‡ DOM å…ƒç´ ä¼šå¯¼è‡´æ¸²æŸ“å¡é¡¿ï¼ˆå‡ ç™¾ä¸ªå°±ä¼šæœ‰æ€§èƒ½é—®é¢˜ï¼‰
- é¿å…æ·±å±‚åµŒå¥—ç»„ä»¶é“¾ï¼Œé€ æˆä¸å¿…è¦çš„é‡æ¸²æŸ“

---

### Tailwind CSS

**æ¶æ„å®šä½**ï¼šUIå±‚ - åŸå­åŒ– CSS æ ·å¼å¼•æ“

**é›†æˆåˆ†æ**ï¼š

| ç›¸å…³æŠ€æœ¯ | é›†æˆæ–¹å¼ | æ³¨æ„äº‹é¡¹ |
|----------|----------|----------|
| Vite | æ„å»ºé›†æˆ | `@tailwindcss/vite` æ’ä»¶ |
| React | æ ·å¼ç¼–å†™ | ç›´æ¥åœ¨ JSX ä¸­ä½¿ç”¨å·¥å…·ç±» |
| Radix UI | æ ·å¼è¦†ç›– | è¦†ç›–é»˜è®¤æ ·å¼å®ç°è‡ªå®šä¹‰å¤–è§‚ |
| shadcn/ui | æ ·å¼åŸºç¡€ | ç»„ä»¶åŸºäº Tailwind æ„å»º |
| PostCSS | å¤„ç† | ç¡®ä¿ purge æ­£ç¡®ä»¥å‡å°ä½“ç§¯ |
| design tokens | é…ç½® | åœ¨ `tailwind.config.js` ä¸­å®šä¹‰è®¾è®¡è§„èŒƒ |

**æ³¨æ„äº‹é¡¹**ï¼š

- é…ç½® `tailwind.config.js` å®šä¹‰ç»Ÿä¸€çš„è®¾è®¡ç³»ç»Ÿ
- ä½¿ç”¨ `@apply` è°¨æ…ï¼Œé¿å…ç ´ååŸå­åŒ–åŸåˆ™
- æ„å»ºæ—¶å¯ç”¨ Tree-shakingï¼Œåªç”Ÿæˆç”¨åˆ°çš„ CSS

---

### Radix UI

**æ¶æ„å®šä½**ï¼šUIå±‚ - æ— æ ·å¼å¯è®¿é—®æ€§ç»„ä»¶åº“

**é›†æˆåˆ†æ**ï¼š

| ç›¸å…³æŠ€æœ¯ | é›†æˆæ–¹å¼ | æ³¨æ„äº‹é¡¹ |
|----------|----------|----------|
| Tailwind CSS | æ ·å¼é…åˆ | æ— æ ·å¼ï¼Œéœ€è‡ªè¡Œæ·»åŠ æ ·å¼ |
| React | ç»„ä»¶æ¸²æŸ“ | å‡½æ•°å¼ç»„ä»¶ + Hooks |
| shadcn/ui | åº•å±‚ä¾èµ– | shadcn/ui åŸºäº Radix æ„å»º |
| Zustand | æ— ç›´æ¥é›†æˆ | çŠ¶æ€ç”± Radix å†…éƒ¨ç®¡ç† |

**æ³¨æ„äº‹é¡¹**ï¼š

- éœ€é¢å¤–å®‰è£…å¯¹åº”ç»„ä»¶çš„åŒ…ï¼ˆå¦‚ `@radix-ui/react-dialog`ï¼‰
- éœ€è¦ç†è§£å…¶ API è®¾è®¡ï¼ˆTriggerã€Contentã€Overlay ç­‰ï¼‰
- é”®ç›˜å¯¼èˆªå’Œç„¦ç‚¹ç®¡ç†ç”± Radix è‡ªåŠ¨å¤„ç†

**å‘**ï¼š

- æ— é»˜è®¤æ ·å¼ï¼Œå¤–è§‚éœ€è¦å®Œå…¨è‡ªå®šä¹‰
- ç»„ä»¶ç»„åˆæ–¹å¼å¤æ‚ï¼Œéœ€è¦é˜…è¯»æ–‡æ¡£

---

### shadcn/ui

**æ¶æ„å®šä½**ï¼šUIå±‚ - ç»„ä»¶æ„å»ºæ–¹æ³•è®ºï¼ˆRadix + Tailwind ç»„åˆï¼‰

**é›†æˆåˆ†æ**ï¼š

| ç›¸å…³æŠ€æœ¯ | é›†æˆæ–¹å¼ | æ³¨æ„äº‹é¡¹ |
|----------|----------|----------|
| React | ç»„ä»¶æ¸²æŸ“ | æ ‡å‡† React ç»„ä»¶ |
| Tailwind CSS | æ ·å¼åŸºç¡€ | ç»„ä»¶ä½¿ç”¨ Tailwind ç±» |
| Radix UI | è¡Œä¸ºå¼•æ“ | Dialogã€Dropdown ç­‰åŸºäº Radix |
| Zustand | çŠ¶æ€é›†æˆ | é€šè¿‡ props ä¼ é€’çŠ¶æ€ |
| Lucide React | å›¾æ ‡ä¾èµ– | ç»„ä»¶ä½¿ç”¨ Lucide å›¾æ ‡ |
| TypeScript | ç±»å‹æ”¯æŒ | å†…ç½®ç±»å‹å®šä¹‰ |

**æ³¨æ„äº‹é¡¹**ï¼š

- ä¸æ˜¯ npm åŒ…ï¼Œæ˜¯ CLI å·¥å…·å°†ç»„ä»¶ä»£ç å¤åˆ¶åˆ°é¡¹ç›®
- ç»„ä»¶ä»£ç å®Œå…¨å¯æ§ï¼Œå¯éšæ„ä¿®æ”¹
- è¿è¡Œ `npx shadcn-ui@latest add button` æ·»åŠ ç»„ä»¶

**å‘**ï¼š

- ä¸ Reactã€Tailwind CSS ç´§å¯†ç»‘å®š
- å‡çº§éœ€è¦æ‰‹åŠ¨åŒæ­¥ä¿®æ”¹çš„ä»£ç 
- ç»„ä»¶å¤åˆ¶å¯èƒ½å¯¼è‡´ä»£ç é‡å¤

---

### Lucide React

**æ¶æ„å®šä½**ï¼šUIå±‚ - å›¾æ ‡åº“

**é›†æˆåˆ†æ**ï¼š

| ç›¸å…³æŠ€æœ¯ | é›†æˆæ–¹å¼ | æ³¨æ„äº‹é¡¹ |
|----------|----------|----------|
| React | SVG ç»„ä»¶æ¸²æŸ“ | `<Icon />` ç»„ä»¶ |
| Tailwind CSS | å›¾æ ‡æ ·å¼ | é€šè¿‡ class æ§åˆ¶å¤§å°ã€é¢œè‰² |
| shadcn/ui | å›¾æ ‡ä½¿ç”¨ | ç»„ä»¶ä¸­åµŒå…¥ Lucide å›¾æ ‡ |
| ä»»æ„ UI åº“ | é€šç”¨å›¾æ ‡ | æŠ€æœ¯æ ˆé€šç”¨ |

**æ³¨æ„äº‹é¡¹**ï¼š

- æŒ‰éœ€å¯¼å…¥é¿å…æ‰“åŒ…ä½“ç§¯è¿‡å¤§
- æ”¯æŒ `size`ã€`color`ã€`strokeWidth` ç­‰å±æ€§

---

### React Router v7

**æ¶æ„å®šä½**ï¼šUIå±‚ - å£°æ˜å¼è·¯ç”±è§£å†³æ–¹æ¡ˆ

**é›†æˆåˆ†æ**ï¼š

| ç›¸å…³æŠ€æœ¯ | é›†æˆæ–¹å¼ | æ³¨æ„äº‹é¡¹ |
|----------|----------|----------|
| React | é¡µé¢æ¸²æŸ“ | å£°æ˜å¼è·¯ç”±é…ç½® |
| Vite | æ„å»ºé›†æˆ | ä»£ç åˆ†å‰² + HMR |
| Zustand | çŠ¶æ€ä¿æŒ | é¡µé¢åˆ‡æ¢æ—¶å¯èƒ½éœ€è¦æŒä¹…åŒ– |
| Tauri | è·¯ç”±é€‚é… | éœ€è¦å¤„ç†åŸç”Ÿè·¯ç”± |

**æ³¨æ„äº‹é¡¹**ï¼š

- æ”¯æŒåŸºäºè·¯ç”±çš„ä»£ç åˆ†å‰²
- ä¸ Vite HMR æ·±åº¦é›†æˆ
- å¤„ç†åµŒå¥—è·¯ç”±æ—¶æ³¨æ„å¸ƒå±€ç»„ä»¶

---

## äºŒã€ä¸šåŠ¡å±‚ï¼ˆç¬¬6å±‚ï¼‰

### Zustand

**æ¶æ„å®šä½**ï¼šä¸šåŠ¡å±‚/UIå±‚ - çŠ¶æ€ç®¡ç†

**é›†æˆåˆ†æ**ï¼š

| ç›¸å…³æŠ€æœ¯ | é›†æˆæ–¹å¼ | æ³¨æ„äº‹é¡¹ |
|----------|----------|----------|
| React | Hooks (`useStore`) | é€‰æ‹©æ€§è®¢é˜…é¿å…é‡æ¸²æŸ“ |
| Dexie.js | æŒä¹…åŒ–é›†æˆ | ä½¿ç”¨ `persist` ä¸­é—´ä»¶ |
| SQLite | æ•°æ®æŒä¹…åŒ– | çŠ¶æ€ â†’ å­˜å‚¨é€‚é…å™¨ |
| IndexedDB | Web æŒä¹…åŒ– | Dexie.js é€‚é… |
| shadcn/ui | çŠ¶æ€æ¶ˆè´¹ | props ä¼ é€’æˆ– Hook ç›´æ¥è°ƒç”¨ |
| äº‹ä»¶æ€»çº¿ | çŠ¶æ€åŒæ­¥ | çŠ¶æ€å˜æ›´æ—¶ emit äº‹ä»¶ |

**Zustand + shadcn/ui é›†æˆ**ï¼š

```typescript
// ä¸šåŠ¡å±‚ store (Layer 6)
const useThemeStore = create((set) => ({
  theme: 'light',
  toggleTheme: () => set((state) => ({ theme: state.theme === 'light' ? 'dark' : 'light' })),
}));

// UIå±‚ç»„ä»¶ (Layer 7)
import { Switch } from '@/components/ui/switch';
import { useThemeStore } from '@/business/theme.store';

function ThemeToggle() {
  const { theme, toggleTheme } = useThemeStore();
  return <Switch checked={theme === 'dark'} onCheckedChange={toggleTheme} />;
}
```

**æ³¨æ„äº‹é¡¹**ï¼š

- é¿å…å¼€å‘è§„èŒƒé—®é¢˜ï¼Œé˜²æ­¢å±‚æ¬¡è¿‡æ·±çš„åµŒå¥—å¯¹è±¡
- ä½¿ç”¨é€‰æ‹©å™¨ `useStore(state => state.x)` åªè®¢é˜…éœ€è¦çš„çŠ¶æ€
- å¯æŒ‰é¢†åŸŸæ‹†åˆ†å¤šä¸ª storeï¼ˆuserStoreã€notesStoreã€syncStoreï¼‰

---

## ä¸‰ã€äº‹ä»¶æ€»çº¿ï¼ˆç¬¬5å±‚ï¼‰

### mitt

**æ¶æ„å®šä½**ï¼šäº‹ä»¶æ€»çº¿ - Actor å†…æ¨¡å—é€šè®¯

**é›†æˆåˆ†æ**ï¼š

| ç›¸å…³æŠ€æœ¯ | é›†æˆæ–¹å¼ | æ³¨æ„äº‹é¡¹ |
|----------|----------|----------|
| TypeScript | æ³›å‹ç±»å‹ | `mitt<T>()` å®šä¹‰äº‹ä»¶ç±»å‹ |
| ç½‘ç»œå±‚ | ç¦»çº¿é˜Ÿåˆ— | ç½‘ç»œæ¢å¤æ—¶é‡æ–° emit |
| å­˜å‚¨å±‚ | æŒä¹…åŒ–äº‹ä»¶ | ç¦»çº¿äº‹ä»¶å­˜å…¥æœ¬åœ°å­˜å‚¨ |
| ä¸šåŠ¡å±‚ | æ¨¡å—è§£è€¦ | å‘å¸ƒ/è®¢é˜…æ¨¡å¼ |
| React | æ— ç›´æ¥é›†æˆ | å¯åœ¨ä»»æ„ä½ç½®ä½¿ç”¨ |

**äº‹ä»¶æ€»çº¿å°è£…è®¾è®¡**ï¼š

```typescript
// core/event-bus/events.ts
export type AppEvents = {
  'data:syncCompleted': { status: 'success' | 'failed' };
  'auth:userLoggedIn': { userId: string };
  'storage:databaseReady': void;
};

// core/event-bus/index.ts
import mitt, { Emitter } from 'mitt';
import { AppEvents } from './events';

export const eventBus: Emitter<AppEvents> = mitt<AppEvents>();
```

**æ³¨æ„äº‹é¡¹**ï¼š

- é¿å…äº‹ä»¶åç§°å†²çªï¼Œå»ºè®®ä½¿ç”¨å‘½åç©ºé—´ï¼ˆå¦‚ `'user:login'`ï¼‰
- è®°å¾—åœ¨ç»„ä»¶å¸è½½æ—¶ `off` äº‹ä»¶ç›‘å¬å™¨
- è€ƒè™‘å®ç°ç¦»çº¿äº‹ä»¶é˜Ÿåˆ—æ”¯æŒç¦»çº¿ä¼˜å…ˆ

---

### ts-emitsï¼ˆå¤‡é€‰ï¼‰

**æ¶æ„å®šä½**ï¼šäº‹ä»¶æ€»çº¿ - ç±»å‹å®‰å…¨äº‹ä»¶

**æ³¨æ„äº‹é¡¹**ï¼š

- ç”Ÿæ€å¼±ï¼ˆ1 starï¼‰ï¼Œä¸¤å¹´æœªç»´æŠ¤
- å»ºè®®ä»…ç”¨äºæ¥å£å±‚è®¾è®¡å‚è€ƒï¼Œåç»­è¿ç§»åˆ° mitt

---

## å››ã€å­˜å‚¨å±‚ï¼ˆç¬¬2å±‚ï¼‰

### Dexie.js

**æ¶æ„å®šä½**ï¼šå­˜å‚¨å±‚ - IndexedDB å°è£…ï¼ˆWebç«¯ï¼‰

**é›†æˆåˆ†æ**ï¼š

| ç›¸å…³æŠ€æœ¯ | é›†æˆæ–¹å¼ | æ³¨æ„äº‹é¡¹ |
|----------|----------|----------|
| React | æ·±åº¦é›†æˆ | é…åˆ `useLiveQuery` å®ç°å“åº”å¼ |
| Zustand | æŒä¹…åŒ– | å¯é€šè¿‡ persist ä¸­é—´ä»¶é›†æˆ |
| å­˜å‚¨æŠ½è±¡å±‚ | é€‚é…å™¨æ¨¡å¼ | å®ç° `IStorageAdapter` æ¥å£ |
| TypeScript | ç±»å‹å®‰å…¨ | Schema å®šä¹‰ |

---

### SQLite ç³»åˆ—

**æ¶æ„å®šä½**ï¼šå­˜å‚¨å±‚ - PC/ç§»åŠ¨ç«¯æœ¬åœ°å­˜å‚¨

| å…·ä½“åº“ | åœºæ™¯ | é›†æˆæ–¹å¼ |
|--------|------|----------|
| **bun:sqlite** | Bun è¿è¡Œæ—¶ | åŸç”Ÿ `import { Database } from 'bun:sqlite'` |
| **rusqlite** | Rust/Tauri | `use rusqlite;` |
| **SQLite WASM** | æµè§ˆå™¨ | WebAssembly è¿è¡Œ |
| **tauri-plugin-sql** | Tauri | `invoke('query', { sql: '...' })` |
| **tauri-plugin-store** | Tauri | é”®å€¼å¯¹å­˜å‚¨ |

**å­˜å‚¨æŠ½è±¡å±‚è®¾è®¡**ï¼š

```
core/storage/
â”œâ”€â”€ interface.ts      # IStorageAdapter æ¥å£å®šä¹‰
â”œâ”€â”€ provider.ts       # åŠ¨æ€é€‰æ‹©é€‚é…å™¨
â”œâ”€â”€ indexeddb.adapter.ts  # Dexie.js å®ç° (Web)
â”œâ”€â”€ sqlite.adapter.ts     # Tauri/SQLite å®ç° (æ¡Œé¢/ç§»åŠ¨)
â””â”€â”€ index.ts          # getStorage() ç»Ÿä¸€å¯¼å‡º
```

**æ³¨æ„äº‹é¡¹**ï¼š

- Webç«¯ä½¿ç”¨ Dexie.js (IndexedDB)
- Tauri æ¡Œé¢ç«¯ä½¿ç”¨ tauri-plugin-sql æˆ– rusqlite
- è€ƒè™‘æœªæ¥ç»Ÿä¸€ä½¿ç”¨ SQLite WASM

---

## äº”ã€åº”ç”¨æ¡†æ¶

### Tauri v2

**æ¶æ„å®šä½**ï¼šåŸç”Ÿåº”ç”¨æ‰“åŒ… - æ¡Œé¢ + ç§»åŠ¨ç«¯

**é›†æˆåˆ†æ**ï¼š

| ç›¸å…³æŠ€æœ¯ | é›†æˆæ–¹å¼ | æ³¨æ„äº‹é¡¹ |
|----------|----------|----------|
| React | å‰ç«¯æ¸²æŸ“ | WebView ä½œä¸º UI å¼•æ“ |
| Rust | åç«¯é€»è¾‘ | `src-tauri/` ç›®å½• |
| rusqlite | æ•°æ®åº“ | Rust ç«¯æ“ä½œ SQLite |
| tauri-plugin-sql | æ•°æ®åº“äº¤äº’ | å‰ç«¯è°ƒç”¨ SQL |
| tauri-plugin-store | é”®å€¼å­˜å‚¨ | TypeScript API |
| ç½‘ç»œå±‚ | P2P/mDNS | Rust ç«¯æˆ– IPC è°ƒç”¨ |

**æ³¨æ„äº‹é¡¹**ï¼š

- å‰ç«¯è¿è¡Œåœ¨å—é™æ²™ç®±
- è®¿é—®ç³»ç»Ÿèµ„æºéœ€é€šè¿‡æ˜ç¡®æˆæƒçš„ API
- ç§»åŠ¨ç«¯æ”¯æŒéœ€è¦é¢å¤–é…ç½®

---

## å…­ã€åç«¯è¿è¡Œæ—¶

### Bun

**æ¶æ„å®šä½**ï¼šå¼€å‘å·¥å…·é“¾ / æ½œåœ¨åç«¯è¿è¡Œæ—¶

**é›†æˆåˆ†æ**ï¼š

| ç›¸å…³æŠ€æœ¯ | é›†æˆæ–¹å¼ | æ³¨æ„äº‹é¡¹ |
|----------|----------|----------|
| Vite | æ›¿ä»£æ–¹æ¡ˆ | å¼€å‘æ—¶å¯ç”¨ Bun æ›¿ä»£ |
| bun:sqlite | æ•°æ®åº“ | åŸç”Ÿé«˜æ€§èƒ½ SQLite |
| TypeScript | åŸç”Ÿæ”¯æŒ | æ— éœ€é¢å¤–ç¼–è¯‘ |
| npm ç”Ÿæ€ | å…¼å®¹ | å¤§éƒ¨åˆ†åŒ…å¯ç”¨ |

**æ³¨æ„äº‹é¡¹**ï¼š

- ç”Ÿæ€ç›¸å¯¹ Node.js è¾ƒå°
- éƒ¨åˆ† API ä»å±å®éªŒé˜¶æ®µ
- å®‰å…¨æ€§éœ€è¯„ä¼°

---

## ä¸ƒã€è®¤è¯

### Auth.js

**æ¶æ„å®šä½**ï¼šä¸šåŠ¡å±‚/è®¤è¯æ¨¡å— - ç”¨æˆ·èº«ä»½è®¤è¯

**é›†æˆåˆ†æ**ï¼š

| ç›¸å…³æŠ€æœ¯ | é›†æˆæ–¹å¼ | æ³¨æ„äº‹é¡¹ |
|----------|----------|----------|
| React | å‰ç«¯é›†æˆ | Provider åŒ…è£¹ |
| Tauri | åç«¯é€‚é… | éœ€è‡ªå®šä¹‰åç«¯é€»è¾‘ |
| TypeScript | ç±»å‹å®‰å…¨ | å†…ç½®ç±»å‹å®šä¹‰ |
| Zustand | ç”¨æˆ·çŠ¶æ€ | ç»“åˆ store ç®¡ç† |

**MVP é˜¶æ®µå¿«é€Ÿå®ç°æ–¹æ¡ˆ**

---

## å…«ã€æŠ€æœ¯æ ˆä¸€è§ˆ

```
ç¬¬7å±‚ UIï¼šReact + TypeScript + Vite + Tailwind CSS + Radix UI + shadcn/ui + Lucide + React Router
ç¬¬6å±‚ ä¸šåŠ¡ï¼šZustand + Auth.js
ç¬¬5å±‚ äº‹ä»¶ï¼šmitt (å°è£…)
ç¬¬4å±‚ æ•°æ®ï¼šTypeScript interface/type
ç¬¬3å±‚ åŒæ­¥ï¼šTypeScript åŒæ­¥ç®—æ³•
ç¬¬2å±‚ å­˜å‚¨ï¼šDexie.js (Web) + bun:sqlite/rusqlite/SQLite WASM (PC)
ç¬¬1å±‚ ç½‘ç»œï¼šmDNS + WebRTC/P2P + WebSocket
åº”ç”¨æ‰“åŒ…ï¼šTauri v2
è¿è¡Œæ—¶ï¼šBun (å¼€å‘å·¥å…·/æ½œåœ¨åç«¯)
```

---

## ä¹ã€é›†æˆå…³ç³»å›¾

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚           UIå±‚ (ç¬¬7å±‚)              â”‚
                    â”‚  React + Vite + Tailwind + shadcn/ui â”‚
                    â”‚  + Lucide + React Router            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚           ä¸šåŠ¡å±‚ (ç¬¬6å±‚)              â”‚
                    â”‚  Zustand (çŠ¶æ€) + Auth.js (è®¤è¯)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                â”‚                â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
     â”‚   äº‹ä»¶æ€»çº¿(5)    â”‚ â”‚ æ•°æ®å±‚(4) â”‚ â”‚  åŒæ­¥å±‚(3)  â”‚
     â”‚     mitt        â”‚ â”‚ TypeScriptâ”‚ â”‚  TypeScript â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
              â”‚                â”‚                â”‚
              â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
              â”‚       â”‚    å­˜å‚¨å±‚(2)     â”‚       â”‚
              â”‚       â”‚ Dexie.js/SQLite â”‚       â”‚
              â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
              â”‚                â”‚                â”‚
              â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
              â”‚       â”‚    ç½‘ç»œå±‚(1)     â”‚       â”‚
              â”‚       â”‚ mDNS+P2P+WS     â”‚       â”‚
              â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
              â”‚                â”‚                â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚         Tauri v2 (æ‰“åŒ…æ¡†æ¶)      â”‚
              â”‚  Ruståç«¯ + WebViewå‰ç«¯          â”‚
              â”‚  rusqlite + tauri-plugin-*      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## åã€å¾…è°ƒç ”

- [x] xstate çŠ¶æ€æœºè°ƒç ”
- [ ] åç«¯è¿è¡Œæ—¶å¯¹æ¯”ï¼šBun vs Deno vs Node
- [ ] ç®€å•ä»£ç æ ·ä¾‹ï¼šæ¯é¡¹æŠ€æœ¯ 10 è¡Œå†…è°ƒç”¨ç¤ºä¾‹
